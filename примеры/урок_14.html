<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">

  <script src="../художник.js"></script>

  <script>

    окно.после_загрузки = async function () {
      чайник                              = await запрос( 'модели/урок_14_чайник.json' )
      чайник.данные_текстуры.путь_к_файлу = 'модели/' + чайник.данные_текстуры.название_файла

      код_вершинного_шейдера_попиксельное_освещение   = await запрос( 'шейдеры/урок_14_вершинный_шейдер.glsl' )
      код_фрагментного_шейдера_попиксельное_освещение = await запрос( 'шейдеры/урок_14_фрагментный_шейдер.glsl' )

      таблица_соответствия_данным_модели_и_переменным_шейдеров = {
        вершины            : 'atribut_poziciya_vershin',
        координаты_текстуры: 'atribut_koordinaty_tekstury',
        нормали            : 'atribut_normali_vershin',
      }

      холст_1    = Холст( 'холст_1' )
      художник_1 = Художник( холст_1,
                             код_вершинного_шейдера_попиксельное_освещение,
                             код_фрагментного_шейдера_попиксельное_освещение,
                             таблица_соответствия_данным_модели_и_переменным_шейдеров )

      чайник.угол = 180

      функции_для_постоянного_повторения.добавить( изменение_углов )

      function изменение_углов() {
        чайник.угол += 0.05 * время_с_последней_отсечки
      }

      художник_1.афинные_преобразования = function ( матрица_модель_вид, предмет ) {
        вращать_матрицу( матрица_модель_вид, градусы_в_радианы( предмет.угол ), [0.0, 1.0, 0.0] )
      }

      камера.расстояние_до_цели = 40.0
      камера.тангаж             = -23.4
      камера.крен               = 15.0

      художник_1.свет_включён      = да
      художник_1.текстуры_включены = да

      художник_1.блики_включены = да
      художник_1.цвет_бликов    = [0.8, 0.8, 0.8]
      художник_1.сила_блеска    = 32

      художник_1.цвет_фонового_освещения = [0.2, 0.2, 0.2]

      художник_1.позиция_источника_освещениея = [-10.0, 4.0, -20.0]
      художник_1.цвет_источника_освещениея    = [0.8, 0.8, 0.8]


      художник_1.цвет_для_очистки = [0.0, 0.0, 0.0, 1.0]

      художник_1.нарисуй( [чайник] )
    }
  </script>

  <title>Урок 13. Попиксельное освещение и несколько программ</title>
</head>

<body>

<div id="контейнер">
  <canvas id="холст_1" width="500" height="500"></canvas>
  <div>
    <a href="index.html">< Назад</a>
  </div>
</div>

</body>
</html>